<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Title</title>
</head>
<body>
    <button id="start">시작</button>
    <button id="stop">정지</button>
    <p>
        시간: <span id="timer">0</span>초
    </p>

    <script>
        const $start = document.getElementById(`start`);
        const $stop = document.getElementById(`stop`);

        let intervalId = null;

        // 시작 버튼 클릭시 스톱워치 실행
        $start.addEventListener(`click`, e => {
            // 시작 버튼을 누른 시간 읽어오기
            const startTime = new Date();

            //이미 인터벌이 실행 중이면 종료
            if (intervalId !== null) return;

            // 현재 시간 읽어오기
            intervalId = setInterval(() => {
                const now = new Date();
                console.log(`start: `, startTime);
                console.log(`now: `, now);
                console.log(`=============================================`);
                //경과 시간 구하기
                const elapsedTime = now - startTime; // 양 시간의 차이를 밀리 초로 알려줌

                // 타이머에 경과 시간 렌더링
                const $timerSpan = document.getElementById(`timer`);
                $timerSpan.textContent = elapsedTime / 1000; // 초로 변환

            }, 1);

            // 정지 이벤트
            $stop.addEventListener(`click`, e => {
                // 인터벌을 취소
               clearInterval(intervalId);
               // 다음 재시작을 위해 id를 null로 초기화
                intervalId = null;
            });

            const now = new Date();


        });
    </script>

</body>
</html>